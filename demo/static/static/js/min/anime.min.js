// @codekit-append "jquery.inview.js"
(function(a){var b=a("#wrap").find(".animate"),c=Modernizr.csstransitions,d=26,e=a(window),f=function(a){typeof a!="object"&&(a={css:a,jquery:a});return a},g=function(b){var c=b.clone();c.css({position:a(b[0]).data("position"),zIndex:"auto"});b.replaceWith(c)};offsetChildren=function(b,c){var e=b.children(),f=b.clone(),g=f.children();a(g[0]).data("position",a(e[0]).css("position"));a.each(g,function(b,f){if(b===d)return;f=a(f);var g=a(e[b]).position(),h,i,j;f.data("top",g.top);f.data("left",g.left);if(typeof c=="function"){h=c({index:b,element:f,offset:g});j=h.top;i=h.left}else{j=c.top;i=c.left}f.css({position:"absolute",top:j,left:i,zIndex:10001,visibility:"visible"})});b.replaceWith(f);return f},runAnimationOnChildren=function(b,e,h){var i=b.children();if(b.hasClass("animate-defer")){b.removeClass("animate-defer");b.one("inview",function(a,c){c===!0&&runAnimationOnChildren(b,e,h)});return}e=f(e);if(c){setTimeout(function(){a.each(i,function(b,c){if(b===d)return;c=a(c);c.css({top:c.data("top"),left:c.data("left")})})},10);setTimeout(function(){typeof h!="undefined"&&h(b,i);g(i)},e.css+10)}else a.each(i,function(c,f){if(c===d)return;f=a(f);f.animate({top:f.data("top"),left:f.data("left")},{queue:!1,duration:e.jquery,complete:function(){typeof h!="undefined"&&h(b,a(this))}});setTimeout(function(){g(i)},e.jquery)})},altSlide=function(b,c){var d=b.width(),e=parseInt(b.css("padding-left"),10)*2,g=-d-e,h=d+e,i=b.children();b.css("overflow","hidden").css("height",b.height());i.css("max-width",a(i[0]).width());b=offsetChildren(b,function(a){var b={top:a.offset.top,left:g};a.index%2!==0&&(b.left=h);return b});c=f(c);runAnimationOnChildren(b,c,function(a,b){a.css("overflow","auto");a.css("height","auto");b.css({maxWidth:"none"})})},twoColSlide=function(b,c){var d=b.position().left,e=a(window).height()+a(document).scrollTop();b.css("height",b.height());b=offsetChildren(b,function(a){var b={top:e,left:-d};a.index%2!==0&&(b.left=a.offset.left+d);return b});c=f(c);runAnimationOnChildren(b,c,function(a,b){a.css("height","auto")})};a.each(b,function(b,c){c=a(c);c.hasClass("two-col")&&(e.width()>959?twoColSlide(c,{css:1e3,jquery:850}):altSlide(c,{css:500,jquery:350}))})})(jQuery);(function(a){function b(){var b=window.innerHeight,c=document.compatMode;if(c||!a.support.boxModel)b=c=="CSS1Compat"?document.documentElement.clientHeight:document.body.clientHeight;return b}a(window).scroll(function(){var c=b(),d=document.documentElement.scrollTop?document.documentElement.scrollTop:document.body.scrollTop,e=[];a.each(a.cache,function(){this.events&&this.events.inview&&e.push(this.handle.elem)});e.length&&a(e).each(function(){var b=a(this),e=b.offset().top,f=b.height(),g=b.data("inview")||!1;if(d>e+f||d+c<e){if(g){b.data("inview",!1);b.trigger("inview",[!1])}}else if(d<e+f&&!g){b.data("inview",!0);b.trigger("inview",[!0])}})});a(function(){a(window).scroll()})})(jQuery);